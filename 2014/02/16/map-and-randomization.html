<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="HTML5 strategy : Strategy game experiment" />

    <link rel="stylesheet" type="text/css" media="screen" href="/html5_strategy/stylesheets/stylesheet.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-48093245-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    <title>HTML5 strategy</title>
  </head>

  <body>
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/tjbladez/html5_strategy">View on GitHub</a>

          <h1 id="project_title">HTML5 strategy</h1>
          <h2 id="project_tagline">Strategy game experiment</h2>
        </header>
    </div>

    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <div class="site">
          <p>
  <a href="/html5_strategy">Home</a>
</p>
<h2>Map & Randomization of Sprites</h2>
<p class="meta">16 Feb 2014</p>

<div class="post">
<p>Alright, time to create some sprites and have some fun. You can either draw your first sprite or get it from available open art. Note that if you decide to search to be aware of licensing as well as availability in the open art community (and dont forget to contibute to it as well). A lot of tiles are targeting dungeon crawlers or platformers and neither of them is what we really need here.</p>

<p>There are plenty of online tutorials that teach you creation of the tile - if I could highlight one - I would probably recommend <a href="http://petesqbsite.com/sections/tutorials/tuts/tsugumo/default.htm">this one</a> as it does an exceptional job teaching you basics while being very understandable.</p>

<p>Now, let me tell you  that I am not an artist. Nor am I any good at drawing or a lot of creative forms of expression for that matter (I do enjoy playing piano). With that being said, I do enjoy occasional drawing of sprites or modification of existing sprites. Anything I will make, wont really work for the professional project, but should do just fine for the purpose of this project.</p>

<p>Here I am starting where a lot of 32x32 tiles start from. CC art by David E. Gervais <a href="http://pousse.rapiere.free.fr/tome/">David Gervais tiles mostly designed for Angband</a>. Right now I will be grabbing 14 of his tiles to serve as a base for any modifications. Grabbing 14 means that out of magic 18 I have talked in the previous post I will need to draw missing four. Next up
we know that one of the most important aspects of the background map is elimination of the grid and addition of the details. While we could infinitely increase quality of sprites and their customizations I have decided that I start with 4 versions of each sprite and randomly generate them. Effectively I would need 72 sprites to cover two types of terrain and their transition.</p>

<p>Here are current sprites I have created/modified to server as my terrain.
<img src="https://github.com/tjbladez/html5_strategy/blob/master/public/media/terrain.png?raw=true" alt="terrain"></p>

<p>I am using the following snippet to make sure random tiles are grabbed (it is not optimized yet but we will get there later).</p>

<div class="highlight"><pre><code class="coffeescript"><span class="nv">loadRandomizedLevel: </span><span class="nf">(level)-&gt;</span>
  <span class="nx">level</span><span class="p">.</span><span class="nx">layer</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span> <span class="nf">(row,r_i)-&gt;</span>
    <span class="nx">row</span><span class="p">.</span><span class="nx">forEach</span> <span class="nf">(column,c_i)-&gt;</span>
      <span class="nv">idx = </span><span class="nb">parseInt</span><span class="p">((</span><span class="nx">column</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
      <span class="nv">newData = </span><span class="p">(</span><span class="nx">idx</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span><span class="o">+</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">].</span><span class="nx">random</span><span class="p">()</span>
      <span class="nx">level</span><span class="p">.</span><span class="nx">layer</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">data</span><span class="p">[</span><span class="nx">r_i</span><span class="p">][</span><span class="nx">c_i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">newData</span>
  <span class="nx">@loadLevel</span><span class="p">(</span><span class="nx">level</span><span class="p">)</span>
</code></pre></div>

<p>That is applied to the map 128x128 tile size (effectively making it 4096x4096 pixels map).</p>

<p>Now if you visit <a href="http://html5-strategy.herokuapp.com/">http://html5-strategy.herokuapp.com/</a> you should see map generated with random tiles in it.</p>

</div>

        </div>
      </section>
    </div>
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">HTML5 strategy maintained by <a href="https://github.com/tjbladez">tjbladez</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
  </body>
</html>
